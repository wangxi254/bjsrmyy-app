(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["yx/hsTest/pay"],{"1df0":function(e,n,t){},"2c91":function(e,n,t){"use strict";t.r(n);var a=t("7302"),i=t("e043");for(var o in i)"default"!==o&&function(e){t.d(n,e,(function(){return i[e]}))}(o);t("81b5");var s,r=t("f0c5"),u=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"802bdfc2",null,!1,a["a"],s);n["default"]=u.exports},6596:function(e,n,t){"use strict";(function(e){t("08a8");a(t("66fd"));var n=a(t("2c91"));function a(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t("543d")["createPage"])},7302:function(e,n,t){"use strict";t.d(n,"b",(function(){return i})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return a}));var a={uniIcons:function(){return Promise.all([t.e("common/vendor"),t.e("components/uni-icons/uni-icons")]).then(t.bind(null,"82f9"))}},i=function(){var e=this,n=e.$createElement,t=(e._self._c,e._f("haddenIdCard")(e.userInfo.credentialNo)),a=parseInt(e.userInfo.credentialType);e.$mp.data=Object.assign({},{$root:{f0:t,m0:a}})},o=[]},"81b5":function(e,n,t){"use strict";var a=t("1df0"),i=t.n(a);i.a},"9f1a":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){t.e("components/userList/index").then(function(){return resolve(t("1b0b"))}.bind(null,t)).catch(t.oe)},i={components:{userModel:a},data:function(){return{credentialTyps:[{value:1,name:"身份证"},{value:2,name:"军官证"},{value:3,name:"户口本"},{value:4,name:"护照"},{value:5,name:"外国人永久居住证"},{value:6,name:"就诊卡号"},{value:7,name:"住院号"},{value:8,name:"病历号"}],type1:["本市","境外","湖北（除武汉）","武汉","其他地区"],type2:["医务人员","检疫或边防检查人员","冷链相关工作人员","监所工作人员","社会福利养老工作人员","复工复产","境外入境","嫌疑人","复课师生"],type3:["病例排查","体检筛选","进博保障","其它（含就诊和住院）"],selForm:{sel1:void 0,sel2:void 0,sel3:void 0},openId:e.getStorageSync("openId"),userInfo:{},PaientCard:{},amount:0,quesionId:null}},onLoad:function(n){if(n.row){var t=JSON.parse(n.row);this.amount=t.money,this.quesionId=t.id}var a=getApp().globalData,i=a.PatientList,o=a.PatientCard;console.log(getApp().globalData),this.userInfo=i[0],this.PaientCard=o,this.userInfo&&Object.keys(this.userInfo).length>0||e.showModal({title:"提示",content:"暂无就诊人信息，是否现在去创建",success:function(n){n.confirm?e.navigateTo({url:"/mine/diagnose/diagnoseLsit"}):n.cancel&&e.navigateTo({url:"./index"})}})},methods:{type1Change:function(e){this.selForm.sel1=this.type1[parseInt(e.detail.value)]},type2Change:function(e){this.selForm.sel2=this.type2[parseInt(e.detail.value)]},type3Change:function(e){this.selForm.sel3=this.type3[parseInt(e.detail.value)]},changeUser:function(e){var n=this;this.userInfo=e,this.$getUserCard(e).then((function(e){return n.PaientCard=e}))},chooseUser:function(e){this.$refs.userModelref.show()},submit:function(){var n=this;if(!this.PaientCard)return console.log(getApp().globalData.PatientCard),e.showToast({icon:"none",text:"暂无病历号"});e.showLoading({text:"加载中..."}),this.$request({path:"/nucleicPatientInfo ",method:"post",query:{patientMrn:this.PaientCard.mrn,area:this.selForm.sel1,occupationClassify:this.selForm.sel2,purpose:this.selForm.sel3,openId:this.openId,questionId:this.quesionId,patientId:this.userInfo.id}}).then((function(t){e.hideLoading(),200==t.data.code&&n.weixinPay(t.data.data)})).catch((function(n){e.hideLoading()}))},weixinPay:function(n){e.requestPayment({timeStamp:n.timeStamp,nonceStr:n.nonceStr,package:"prepay_id"+n.packages,signType:n.signType,paySign:n.paySign,success:function(n){e.navigateTo({url:"../../records/listPay"})},fail:function(n){e.showToast({title:"支付失败",duration:2e3})}})}}};n.default=i}).call(this,t("543d")["default"])},e043:function(e,n,t){"use strict";t.r(n);var a=t("9f1a"),i=t.n(a);for(var o in a)"default"!==o&&function(e){t.d(n,e,(function(){return a[e]}))}(o);n["default"]=i.a}},[["6596","common/runtime","common/vendor"]]]);